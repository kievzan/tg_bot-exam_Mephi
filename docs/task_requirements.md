# О проекте

Партнёр - BotCreators - предлагает разработать телеграм-бота, который позволяет пользователю получить список участников произвольного телеграм-чата без доступа к полноценному списку участников внутри самого Telegram.

Бот принимает на вход файлы истории чата, извлекает информацию об участниках и формирует удобный набор данных в виде списка или Excel-файла.

Задача актуальна для аналитиков, маркетологов и владельцев сообществ, которым необходимо понимать состав аудитории чатов, даже если Telegram не предоставляет встроенного доступа к полному списку участников.

Проект связан с разработкой телеграм-ботов, обработкой данных и реализацией приватности так, чтобы бот не сохранял пользовательские данные на сервере.

## Целевая аудитория

- Владельцы и администраторы телеграм-чатов, которым нужен доступ к списку участников.
- Маркетологи и специалисты по сообществам, работающие с пользовательскими сегментами.
- Исследователи, которым нужно анализировать активность участников в сообществах.
- Люди, которые не имеют прав администратора, но хотят видеть состав участников чата.

Аудитория ценит простоту, быструю выгрузку данных, отсутствие хранения личной информации, а также корректное извлечение участников даже при большом количестве сообщений.

## Выполняемые задачи

Основная функциональность:

### 1. Принимать историю чата.

- Пользователь выгружает историю нужного Telegram-чата и загружает полученный файл (или несколько файлов) в бота.
- Бот обязан принимать любое количество файлов, но нужно явно указать ограничение Telegram (например: «не более 10 файлов»).

### 2. Извлекать участников чата.

- Бот анализирует историю сообщений:
  - находит всех пользователей, которые писали сообщения и были упомянуты в тексте другими пользователями.

- Бот не должен учитывать:
  - Удалённые аккаунты.
  - Дубли - один пользователь должен присутствовать один раз (дубли можно фильтровать по уникальному from_id в json).

### 3. Формировать результат в зависимости от размера.

- Если участников < 50 - бот присылает результат списком прямо в чат.
- Если участников ≥ 51 - бот формирует Excel-файл. В Telegram отправляется только Excel, без дублей сообщений в чате.

### 4. Формировать Excel-файл заданной структуры.

Таблица должна включать поля:

| Поле                     | Описание                                                                                                                         |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------- |
| Дата экспорта            | Дата генерации файла                                                                                                             |
| Username                 | @username пользователя (для участников в качестве username будем использовать from_id в json, для упоминаний - текст упоминания) |
| Имя и фамилия            | Из профиля Telegram (в этой роли будет выступать поле from в json)                                                               |
| Описание                 | Bio/About (отсутствует в json - игнорируем)                                                                                      |
| Дата регистрации         | Если возможно получить из данных (отсутствует в json - игнорируем)                                                               |
| Наличие канала в профиле | Если возможно определить (отсутствует в json - игнорируем)                                                                       |

### 5. Корректно обрабатывать файлы и кодировку.

- Не должно быть ошибок с кодировкой (принимается только в UTF-8).
- Бот обрабатывает файлы, которые позволяет отправлять Telegram (принимается только json).

### 6. Конфиденциальность.

- Бот не хранит данные пользователей, обработка происходит «на лету».
- Файлы не сохраняются на сервере.

## Финальный результат разработки:

- Репозиторий на GitHub.
- Проект должен подниматься в Docker (Docker Compose / Dockerfile).
- Язык программирования любой.
- Скорость обработки не критична, но в пределах разумного.
- UI бота - не регламентирован.

## Ожидаемый результат

Необходимо представить:

### 1. Телеграм-бот с обязательной функциональностью.

Бот должен уметь:

- Корректно принимать файлы истории чатов Telegram.
- Извлекать всех уникальных участников и упомянутых пользователей.
- Формировать корректный Excel (при участниках ≥ 51) или отдавать список в чат (при участниках < 50).
- Разделять участников и упоминания по вкладкам.
- Не сохранять данные на сервере.

### 2. Технические артефакты.

- Полный репозиторий на GitHub:
  - Исходный код.
  - Инструкции по запуску.
  - Docker-конфигурация.

### 3. Документацию.

- Описание технических особенностей проекта.
- Инструкция для пользователя.

## Рекомендации по разработке

- Используйте стандартные библиотеки Telegram Bot API и готовые инструменты для парсинга экспортов чатов (JSON/HTML) (будем парсить json выгрузку через Jackson).
- Обеспечьте работу бота без хранения данных - удаляйте файлы сразу после обработки.
- Учтите ограничение Telegram на количество файлов и укажите его пользователю (например: «Можно отправить до 10 файлов»).
- Гарантируйте корректную кодировку (UTF-8), отсутствие дублей и правильное определение каналов (каналы определить невозможно, игнорируем).
